name: Deploy to Azure Web App

on:
  push:
    branches:
      - main
  workflow_dispatch: # この行によりGitHub UIから手動でトリガーできます

jobs:
  deploy:
    runs-on: ubuntu-latest # GitHubのランナーOSを指定

    steps:
    - uses: actions/checkout@v2 # リポジトリのチェックアウト

    - name: Deploy to Azure Web App
      uses: azure/webapps-deploy@v3 # Azure Web Appへのデプロイを行うアクション
      with:
        app-name: 'tech0-gen-6-step4-studentwebapp-8' # 実際のAzure Web Appの名前を設定
        publish-profile: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }} # 発行プロファイルをGitHubシークレットから取得
        package: '.' # デプロイするファイルが含まれるディレクトリまたはパッケージ
